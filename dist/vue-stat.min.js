/*!
 * vue-stat v0.0.3
 * (c) 2018 steven
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueStat=e.VueStat||{})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}var l=t(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),p=t(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:o).supported=r,t.unsupported=o}),n=t(function(e){var c=Array.prototype.slice,a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var r,o;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(p(e))return!!p(t)&&(e=c.call(e),t=c.call(t),a(e,t,n));if(f(e)){if(!f(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var i=l(e),u=l(t)}catch(e){return!1}if(i.length!=u.length)return!1;for(i.sort(),u.sort(),r=i.length-1;0<=r;r--)if(i[r]!=u[r])return!1;for(r=i.length-1;0<=r;r--)if(o=i[r],!a(e[o],t[o],n))return!1;return typeof e==typeof t}(e,t,n))};function s(e){return null==e}function f(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0]))}});function u(e){return void 0!==e.oldValue&&("object"==typeof e.value?n(e.value,e.oldValue):e.value===e.oldValue)}function c(e){return""===e.value||void 0===e.value||null===e.value}var a=function(e,t){if(!u(t)){var n=[];!1===t.value||"false"===t.value?n.push(!1):n.push(!0),v.setAutoPageview.apply(v,n)}},s=function(n,t){if(!u(t)&&!c(t)){n.removeEventListeners&&"function"==typeof n.removeEventListeners&&n.removeEventListeners();var r=[],e=Object.keys(t.modifiers).map(function(e){if(t.modifiers[e])return e});if("object"==typeof t.value){var o=t.value;o.category&&r.push(o.category),o.action&&r.push(o.action),o.label&&r.push(o.label),o.value&&r.push(o.value),o.nodeid&&r.push(o.nodeid)}else"string"==typeof t.value&&(r=t.value.split(",")).forEach(function(e,t){return r[t]=e.trim()});e.length||e.push("click");var i=[];e.forEach(function(e,t){i[t]=function(){return v.trackEvent.apply(v,r)},n.addEventListener(e,i[t],!1)}),n.removeEventListeners=function(){e.forEach(function(e,t){n.removeEventListener(e,i[t])})}}},f=[],d={bind:function(t,e){var n=f.findIndex(function(e){return e===t}),r=-1!==n;if("none"!==t.style.display){if(r&&f.splice(n,1),r||!u(e)&&!c(e)){var o=[];if("object"==typeof e.value){var i=e.value;i.path&&o.push(i.path),i.fromPath&&o.push(i.fromPath)}else"string"==typeof e.value&&e.value&&(o=(o=e.value.split(",")).map(function(e){return e.trim()}));v.trackPageview.apply(v,o)}}else r||f.push(t)},unbind:function(t,e){var n=f.findIndex(function(e){return e===t});-1!==n&&f.splice(n,1)}};d.update=d.bind;var r={};r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t});var v={_cache:[],_resolve:function(){r.resolve()},_reject:function(){r.reject()},_push:function(){for(var e,t,n,r=[],o=arguments.length;o--;)r[o]=arguments[o];this.debug(r),window._hmt?(e=window._hmt).push.apply(e,r):window._czc?(t=this._czc).push.apply(t,r):(n=this._cache).push.apply(n,r)},_createMethod:function(n){var r=this;return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];r._push(["_"+n].concat(e))}},debug:function(){},ready:function(){return r.promise},install:function(e,t){var n=this;if(!this.install.installed){t.debug?this.debug=console.debug:this.debug=function(){};var r=null;if("object"==typeof t?(r=t.siteId,!1!==t.autoPageview&&(t.autoPageview=!0)):r=t,!r)return console.error("siteId is missing");this.install.installed=!0;var o=document.createElement("script"),i=t.site||"https://hm.baidu.com/hm.js",u=-1<i.indexOf("baidu.com"),c=u?i+"?"+r:i+"?id="+r+"&web_id="+r;o.src=t.src||c,u&&(window._hmt=window._hmt||[]),o.onload=function(){if(!window[u?"_hmt":"_czc"])return console.error("loading uweb statistics script failed, please check src and siteId"),n._reject();n._resolve(),n._cache.forEach(function(e){window[u?"_hmt":"_czc"].push(e)}),n._cache=[]},this.setAccount(t.siteId),this.setAutoPageview(t.autoPageview),document.body.appendChild(o),Object.defineProperty(e.prototype,"$stat",{get:function(){return n}}),e.directive("auto-pageview",a),e.directive("stat-event",s),e.directive("stat-pageview",d)}},patch:function(e){this[e]=this._createMethod(e)}};["trackPageview","trackEvent","setCustomVar","setAccount","setAutoPageview","deleteCustomVar"].forEach(function(e){return v[e]=v._createMethod(e)}),window.Vue&&(window.stat=v),e.default=v,Object.defineProperty(e,"__esModule",{value:!0})});