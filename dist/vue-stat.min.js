/*!
 * vue-stat v0.0.1
 * (c) 2018 steven
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueStat=e.VueStat||{})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}var l=t(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),p=t(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function o(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?o:r).supported=o,t.unsupported=r}),n=t(function(e){var c=Array.prototype.slice,a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var o,r;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(p(e))return!!p(t)&&(e=c.call(e),t=c.call(t),a(e,t,n));if(f(e)){if(!f(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var i=l(e),u=l(t)}catch(e){return!1}if(i.length!=u.length)return!1;for(i.sort(),u.sort(),o=i.length-1;0<=o;o--)if(i[o]!=u[o])return!1;for(o=i.length-1;0<=o;o--)if(r=i[o],!a(e[r],t[r],n))return!1;return typeof e==typeof t}(e,t,n))};function s(e){return null==e}function f(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0]))}});function u(e){return void 0!==e.oldValue&&("object"==typeof e.value?n(e.value,e.oldValue):e.value===e.oldValue)}function c(e){return""===e.value||void 0===e.value||null===e.value}var a=function(e,t){if(!u(t)){var n=[];!1===t.value||"false"===t.value?n.push(!1):n.push(!0),v.setAutoPageview.apply(v,n)}},s=function(n,t){if(!u(t)&&!c(t)){n.removeEventListeners&&"function"==typeof n.removeEventListeners&&n.removeEventListeners();var o=[],e=Object.keys(t.modifiers).map(function(e){if(t.modifiers[e])return e});if("object"==typeof t.value){var r=t.value;r.category&&o.push(r.category),r.action&&o.push(r.action),r.label&&o.push(r.label),r.value&&o.push(r.value),r.nodeid&&o.push(r.nodeid)}else"string"==typeof t.value&&(o=t.value.split(",")).forEach(function(e,t){return o[t]=e.trim()});e.length||e.push("click");var i=[];e.forEach(function(e,t){i[t]=function(){return v.trackEvent.apply(v,o)},n.addEventListener(e,i[t],!1)}),n.removeEventListeners=function(){e.forEach(function(e,t){n.removeEventListener(e,i[t])})}}},f=[],d={bind:function(t,e){var n=f.findIndex(function(e){return e===t}),o=-1!==n;if("none"!==t.style.display){if(o&&f.splice(n,1),o||!u(e)&&!c(e)){var r=[];if("object"==typeof e.value){var i=e.value;i.path&&r.push(i.path),i.fromPath&&r.push(i.fromPath)}else"string"==typeof e.value&&e.value&&(r=(r=e.value.split(",")).map(function(e){return e.trim()}));v.trackPageview.apply(v,r)}}else o||f.push(t)},unbind:function(t,e){var n=f.findIndex(function(e){return e===t});-1!==n&&f.splice(n,1)}};d.update=d.bind;var o={};o.promise=new Promise(function(e,t){o.resolve=e,o.reject=t});var v={_cache:[],_resolve:function(){o.resolve()},_reject:function(){o.reject()},_push:function(){for(var e,t,n,o=[],r=arguments.length;r--;)o[r]=arguments[r];this.debug(o),window._hmt?(e=window._hmt).push.apply(e,o):window._czc?(t=this._czc).push.apply(t,o):(n=this._cache).push.apply(n,o)},_createMethod:function(n){var o=this;return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];o._push(["_"+n].concat(e))}},debug:function(){},ready:function(){return o.promise},install:function(e,t){var n=this;if(!this.install.installed){t.debug?this.debug=console.debug:this.debug=function(){};var o=null;if("object"==typeof t?(o=t.siteId,!1!==t.autoPageview&&(t.autoPageview=!0)):o=t,!o)return console.error("siteId is missing");this.install.installed=!0;var r=document.createElement("script"),i=ptions.site||"https://hm.baidu.com/hm.js",u=-1<i.indexOf("baidu.com"),c=u?i+"?"+o:i+"?id="+o+"&web_id="+o;r.src=t.src||c,u&&(window._hmt=window._hmt||[]),r.onload=function(){if(!window[u?"_hmt":"_czc"])return console.error("loading uweb statistics script failed, please check src and siteId"),n._reject();n._resolve(),n._cache.forEach(function(e){window[u?"_hmt":"_czc"].push(e)}),n._cache=[]},this.setAccount(t.siteId),this.setAutoPageview(t.autoPageview),document.body.appendChild(r),Object.defineProperty(e.prototype,"$stat",{get:function(){return n}}),e.directive("auto-pageview",a),e.directive("stat-event",s),e.directive("stat-pageview",d)}},patch:function(e){this[e]=this._createMethod(e)}};["trackPageview","trackEvent","setCustomVar","setAccount","setAutoPageview","deleteCustomVar"].forEach(function(e){return v[e]=v._createMethod(e)}),window.Vue&&(window.stat=v),e.default=v,Object.defineProperty(e,"__esModule",{value:!0})});